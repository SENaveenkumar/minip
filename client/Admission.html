<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admission</title>
  </head>
  <body style="text-align: center">
    <h1>Fill the admission form to get admission</h1>
    <fieldset>
      <form id="student-form">
        Name: <br />
        <input type="text" name="name1" id="nam1" /> <br /><br />
        Father's name: <br />
        <input type="text" name="fname" id="fname1" /> <br /><br />
        SLLC percent: <br />
        <input type="number" name="sslc" id="sslc1" />% <br /><br />
        HSC percent: <br />
        <input type="number" name="hsc" id="hsc1" />% <br /><br />
        Select the option given below:<br /><br />
        <input type="radio" name="dh" id="dh1" value="Hostel"/> Hostel <br />
        <input type="radio" name="dh" id="dh2" value="Dayscholar" /> Dayscholar <br /><br />
        Select the course: <br /><br />
        <input type="radio" name="course" id="c1" value="IT" />IT <br />
        <input type="radio" name="course" id="c1" value="CSE"/>CSE <br />
        <input type="radio" name="course" id="c1" value="MECH"/>MECH <br />
        <input type="radio" name="course" id="c1" value="CIVIL"/>CIVIL <br /><br />

        <input type="submit" />
      </form>
    </fieldset>
  </body>
  <script>
    const form = document.getElementById("student-form");
    form.addEventListener("submit", createStudent);

    function createStudent(event) {
      event.preventDefault();
      var a0 = document.getElementById("nam1").value;
        var b0 = document.getElementById("fname1").value;
        var c0 = document.getElementById("sslc1").value;
        var d0 = document.getElementById("hsc1").value;
        var dh = form.elements["dh"].value;
        var course = form.elements["course"].value;

        if (
          a0 == "" ||
          b0 == "" ||
          c0 == "" ||
          d0 == "" ||
          dh == "" ||
          course == ""
        ) {
          alert("All fields are required");
          return false;
        }

      const req = {
        name: a0,
        fname: b0,
        sslc: c0,
        hsc: d0,
        am:dh,
        course:course,
        pre_count:0
      };

      fetch("/api/student", {
        method: "POST",
        body: JSON.stringify(req),
        headers: {
          "Content-Type": "application/json",
        },
      })
        .then((res) => res.json())
        .then((res) => {
          alert("Student added successfully!");
        });
    }
  </script>
</html>
